---
const navItems = [
  { name: 'Inicio', href: '/', icon: '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="15" viewBox="0 0 17 14" fill="none"><path d="M1.00403 8.14293L8.4326 0.714355L15.8612 8.14293M3.28974 5.85721V13.2858H13.5755V5.85721M8.4326 13.2858V8.71436" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/></svg>' },
  { 
    name: 'Servicios',
    href: '/servicios',
    children: [
      { name: 'Desarrollo web', href: '/servicios#desarrollo-web' },
      { name: 'Apps móviles', href: '/servicios#apps-moviles' },
      { name: 'UI/UX design', href: '/servicios#diseno' },
      { name: 'Consultoría', href: '/servicios#consultoria' },
    ],
    icon: '<svg xmlns="http://www.w3.org/2000/svg" width="17" height="16" viewBox="0 0 17 16" fill="none"><path d="M3.30769 6.84615H2.15385C1.84783 6.84615 1.55434 6.96772 1.33795 7.18411C1.12157 7.4005 1 7.69398 1 8V9.73077C1 10.0368 1.12157 10.3303 1.33795 10.5467C1.55434 10.763 1.84783 10.8846 2.15385 10.8846H3.30769C3.4607 10.8846 3.60744 10.8238 3.71564 10.7156C3.82383 10.6074 3.88462 10.4607 3.88462 10.3077V7.42308C3.88462 7.27007 3.82383 7.12332 3.71564 7.01513C3.60744 6.90694 3.4607 6.84615 3.30769 6.84615ZM3.30769 6.84615V5.69231C3.30769 4.31522 3.85474 2.99454 4.82848 2.02079C5.80223 1.04705 7.12291 0.5 8.5 0.5C9.87709 0.5 11.1978 1.04705 12.1715 2.02079C13.1453 2.99454 13.6923 4.31522 13.6923 5.69231V6.84615M13.6923 10.8846H14.8462C15.1522 10.8846 15.4457 10.763 15.662 10.5467C15.8784 10.3303 16 10.0368 16 9.73077V8C16 7.69398 15.8784 7.4005 15.662 7.18411C15.4457 6.96772 15.1522 6.84615 14.8462 6.84615H13.6923M13.6923 10.8846C13.5393 10.8846 13.3926 10.8238 13.2844 10.7156C13.1762 10.6074 13.1154 10.4607 13.1154 10.3077V7.42308C13.1154 7.27007 13.1762 7.12332 13.2844 7.01513C13.3926 6.90694 13.5393 6.84615 13.6923 6.84615M13.6923 10.8846V11.75C13.6923 12.362 13.4492 12.949 13.0164 13.3818C12.5836 13.8146 11.9967 14.0577 11.3846 14.0577M11.3846 14.0577C11.3846 13.6752 11.2327 13.3083 10.9622 13.0378C10.6917 12.7673 10.3248 12.6154 9.94231 12.6154H8.21154C7.82901 12.6154 7.46216 12.7673 7.19167 13.0378C6.92119 13.3083 6.76923 13.6752 6.76923 14.0577C6.76923 14.4402 6.92119 14.8071 7.19167 15.0776C7.46216 15.348 7.82901 15.5 8.21154 15.5H9.94231C10.3248 15.5 10.6917 15.348 10.9622 15.0776C11.2327 14.8071 11.3846 14.4402 11.3846 14.0577ZM6.76923 4.53846V6.26923M10.2308 4.53846V6.26923M6.76923 8.57692C6.76923 10.1115 10.2308 10.1115 10.2308 8.57692" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/></svg>',
  },
  { name: 'Proyectos', href: '/proyectos', icon: '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M10.5438 6.53846C11.2235 6.53846 11.7745 5.98743 11.7745 5.30769C11.7745 4.62796 11.2235 4.07692 10.5438 4.07692C9.86403 4.07692 9.31299 4.62796 9.31299 5.30769C9.31299 5.98743 9.86403 6.53846 10.5438 6.53846Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M5.62069 12.6923C5.96056 12.6923 6.23607 12.4168 6.23607 12.0769C6.23607 11.7371 5.96056 11.4615 5.62069 11.4615C5.28082 11.4615 5.0053 11.7371 5.0053 12.0769C5.0053 12.4168 5.28082 12.6923 5.62069 12.6923Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M5.62069 8.38461C6.30042 8.38461 6.85146 7.83358 6.85146 7.15385C6.85146 6.47411 6.30042 5.92308 5.62069 5.92308C4.94095 5.92308 4.38992 6.47411 4.38992 7.15385C4.38992 7.83358 4.94095 8.38461 5.62069 8.38461Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/><path d="M11.7991 15.4985C11.7854 15.2597 11.7025 15.0302 11.5604 14.8378C11.4183 14.6455 11.2233 14.4987 10.9991 14.4154C10.4425 14.2324 9.96933 13.8569 9.66478 13.3563C9.36023 12.8557 9.24425 12.2628 9.3377 11.6844C9.43114 11.1059 9.72788 10.5797 10.1746 10.2005C10.6212 9.82123 11.1886 9.61376 11.7745 9.61538H14.0761C14.4708 9.61648 14.86 9.52263 15.2109 9.34174C15.5618 9.16085 15.864 8.89823 16.092 8.57604C16.3201 8.25385 16.4673 7.88153 16.5213 7.49049C16.5753 7.09945 16.5345 6.70117 16.4022 6.32923C15.9127 4.94704 15.0527 3.72597 13.9162 2.79944C12.7797 1.87291 11.4104 1.27656 9.95795 1.07554C8.50547 0.874516 7.02569 1.07656 5.68026 1.65959C4.33484 2.24263 3.17554 3.18422 2.32902 4.38151C1.48249 5.57879 0.981316 6.98571 0.880238 8.44854C0.779161 9.91137 1.08207 11.3738 1.75588 12.6762C2.42968 13.9785 3.44846 15.0706 4.70091 15.8331C5.95336 16.5957 7.39129 16.9993 8.85761 17C9.58175 17.002 10.3026 16.9026 10.9991 16.7046C11.255 16.6329 11.4765 16.4717 11.6234 16.2503C11.7702 16.0288 11.8326 15.762 11.7991 15.4985Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/></svg>' },
  { name: 'Contacto', href: '/contacto', icon: '<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8 1.22465e-06C9.20376 -0.000664999 10.3921 0.270502 11.4766 0.79297C12.5612 1.31557 13.5139 2.07651 14.2637 3.01856C15.0133 3.9605 15.5408 5.05929 15.8066 6.2334C16.0724 7.40756 16.0697 8.62681 15.7988 9.79981C15.5279 10.9729 14.996 12.07 14.2422 13.0088C13.4884 13.9476 12.5322 14.7038 11.4453 15.2217C10.3584 15.7395 9.1688 16.006 7.96484 16C6.81775 15.9943 5.68738 15.7388 4.64746 15.2578L0.588863 15.9922C0.411886 16.0241 0.231438 15.9584 0.116207 15.8203C0.000961736 15.6821 -0.0310752 15.4927 0.0322224 15.3242L1.20117 12.2119C0.486451 11.0578 0.0764779 9.73962 0.0117146 8.38086C-0.0571557 6.93544 0.26694 5.49826 0.950191 4.22266C1.63347 2.94704 2.65018 1.88032 3.8916 1.13672C5.13297 0.393208 6.55299 0.000451674 8 1.22465e-06ZM8 1C6.73385 1.00042 5.49147 1.3445 4.40527 1.99512C3.31924 2.64568 2.42987 3.57842 1.83203 4.69434C1.23418 5.81047 0.950499 7.06828 1.01074 8.33301C1.071 9.59775 1.47257 10.8227 2.17382 11.877C2.26286 12.0108 2.28214 12.1796 2.22558 12.3301L1.27734 14.8506L4.62304 14.2461L4.70117 14.2383C4.78022 14.2366 4.85892 14.2541 4.93066 14.2891C5.87717 14.7516 6.91626 14.9948 7.96972 15C9.02319 15.0052 10.0646 14.7725 11.0156 14.3193C11.9666 13.8662 12.8033 13.2042 13.4629 12.3828C14.1224 11.5614 14.5881 10.6016 14.8252 9.5752C15.0622 8.54876 15.0646 7.48156 14.832 6.4541C14.5994 5.42674 14.1374 4.46483 13.4814 3.64063C12.8255 2.81647 11.9919 2.15059 11.043 1.69336C10.0939 1.23612 9.05344 0.999379 8 1ZM5.32714 7.6543C5.3269 8.24886 4.84461 8.73047 4.25 8.73047C3.65538 8.73047 3.17309 8.24886 3.17285 7.6543C3.17285 7.05953 3.65523 6.57715 4.25 6.57715C4.84476 6.57715 5.32714 7.05953 5.32714 7.6543ZM9.07714 7.6543C9.0769 8.24886 8.59461 8.73047 8 8.73047C7.40538 8.73047 6.92309 8.24886 6.92285 7.6543C6.92285 7.05953 7.40523 6.57715 8 6.57715C8.59476 6.57715 9.07714 7.05953 9.07714 7.6543ZM12.8271 7.6543C12.8269 8.24886 12.3446 8.73047 11.75 8.73047C11.1554 8.73047 10.6731 8.24886 10.6728 7.6543C10.6728 7.05953 11.1552 6.57715 11.75 6.57715C12.3448 6.57715 12.8271 7.05953 12.8271 7.6543Z" fill="currentColor"/></svg>' }
];

import Logo from '../assets/logo.astro';
---

<header class="fixed top-0 left-0 right-0 z-50 transition-all duration-300" id="header">
  <div class="thenav fixed container-max w-full m-0">
    <div class="internav fixed bg-black/[var(--bg-opacity)] [--bg-opacity:25%] backdrop-blur-md border-b border-white/15 overflow-visible z-[99999] header-animate w-full">
      <div class="section-padding container-max flex items-center justify-between content-between grid-cols-[auto_1fr] m-auto gap-x-10 md:flex w-full py-5">
        <!-- Logo -->
        <div class="flex-shrink-0">
          <a href="/" class="flex items-center space-x-2 group">
            <Logo />
          </a>
        </div>

        <!-- Desktop Navigation -->
        {/* Desktop Navigation */}
        <div class="hidden md:flex items-center space-x-10 relative">
          {navItems.map((item) => (
            <div class="relative group">
              <a 
                href={item.href}
                class="text-white hover:text-primary-400 transition-colors duration-200 font-medium relative flex items-center gap-2"
                set:html={item.icon + item.name}
              >
                <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary-400 transition-all duration-200 group-hover:w-full"></span>
              </a>

              {item.children && (
                <div class="absolute top-full left-0 mt-2 bg-dark-900 rounded-lg shadow-lg opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all duration-200 z-20">
                  {item.children.map((child) => (
                    <a
                      href={child.href}
                      class="block px-4 py-2 text-gray-300 hover:bg-gray-800 hover:text-white transition-colors"
                    >
                      {child.name}
                    </a>
                  ))}
                </div>
              )}
            </div>
          ))}
        </div>


        <!-- CTA Button -->
        <div class="hidden md:flex items-center">
          <a href="/contacto" class="btn-primary text-dark-950 px-6 py-2.5 rounded-lg font-medium transition-all duration-200 hover:scale-105 hover:shadow-lg hover:shadow-primary-600/25 flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M13.4915 2.43841C12.025 0.968412 10.072 0.159912 7.9965 0.159912C3.7125 0.159912 0.2265 3.64591 0.2265 7.92991C0.2265 9.29841 0.5835 10.6354 1.2625 11.8149L0.16 15.8399L4.2795 14.7584C5.4135 15.3779 6.691 15.7034 7.993 15.7034H7.9965C12.277 15.7034 15.84 12.2174 15.84 7.93341C15.84 5.85791 14.958 3.90841 13.4915 2.43841ZM7.9965 14.3944C6.8345 14.3944 5.697 14.0829 4.7065 13.4949L4.472 13.3549L2.029 13.9954L2.68 11.6119L2.526 11.3669C1.8785 10.3379 1.539 9.15141 1.539 7.92991C1.539 4.37041 4.437 1.47241 8 1.47241C9.7255 1.47241 11.346 2.14441 12.564 3.36591C13.782 4.58741 14.531 6.20791 14.5275 7.93341C14.5275 11.4964 11.556 14.3944 7.9965 14.3944ZM11.5385 9.55741C11.346 9.45941 10.3905 8.99041 10.212 8.92741C10.0335 8.86091 9.904 8.82941 9.7745 9.02541C9.645 9.22141 9.274 9.65541 9.1585 9.78841C9.0465 9.91791 8.931 9.93541 8.7385 9.83741C7.5975 9.26691 6.8485 8.81891 6.096 7.52741C5.8965 7.18441 6.2955 7.20891 6.6665 6.46691C6.7295 6.33741 6.698 6.22541 6.649 6.12741C6.6 6.02941 6.2115 5.07391 6.0505 4.68541C5.893 4.30741 5.732 4.35991 5.613 4.35291C5.501 4.34591 5.3715 4.34591 5.242 4.34591C5.1125 4.34591 4.9025 4.39491 4.724 4.58741C4.5455 4.78341 4.045 5.25241 4.045 6.20791C4.045 7.16341 4.7415 8.08741 4.836 8.21691C4.934 8.34641 6.2045 10.3064 8.154 11.1499C9.386 11.6819 9.869 11.7274 10.485 11.6364C10.8595 11.5804 11.633 11.1674 11.794 10.7124C11.955 10.2574 11.955 9.86891 11.906 9.78841C11.8605 9.70091 11.731 9.65191 11.5385 9.55741Z" fill="#020617"/></svg>Escríbenos
          </a>
        </div>


        <!-- Mobile menu button -->
        <div class="md:hidden">
          <button 
            type="button" 
            class="text-gray-300 hover:text-white transition-colors duration-200"
            id="mobile-menu-button"
            aria-label="Abrir menú">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
        </div>
      </div>
    </nav>
  </div>

  <!-- Mobile Navigation -->
  <div class="md:hidden hidden" id="mobile-menu">
    <div class="px-4 pt-2 pb-6 space-y-4 bg-dark-900/95 backdrop-blur-xl border-t border-gray-800">
      {navItems.map((item) => (
        <a 
          href={item.href}
          class="block text-gray-300 hover:text-white transition-colors duration-200 font-medium py-2">
          {item.name}
        </a>
      ))}
      <a 
        href="/contacto"
        class="block bg-primary-600 hover:bg-primary-700 text-white px-6 py-3 rounded-lg font-medium transition-all duration-200 text-center mt-4">
        Hablemos
      </a>
    </div>
  </div>
</header>

<style>
  @media (max-width: 767px) {
    .thenav {
      display: flex;
      justify-content: center;
      margin-top: 3%;
    }
    .internav {
      width: 95%;
      border-radius: 10px;
      border: none;
      padding: 0 1rem;
    }
  }
</style>

<script>
  // Header scroll effect
  const header = document.getElementById('header');
  const mobileMenuButton = document.getElementById('mobile-menu-button');
  const mobileMenu = document.getElementById('mobile-menu');

  window.addEventListener('scroll', () => {
    if (window.scrollY > 50) {
      header?.classList.add('scrolled');
    } else {
      header?.classList.remove('scrolled');
    }
  });

  // Mobile menu toggle
  mobileMenuButton?.addEventListener('click', () => {
    mobileMenu?.classList.toggle('hidden');
  });

  // Close mobile menu when clicking on a link
  const mobileLinks = mobileMenu?.querySelectorAll('a');
  mobileLinks?.forEach(link => {
    link.addEventListener('click', () => {
      mobileMenu?.classList.add('hidden');
    });
  });
</script>