---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';

---

<Layout 
  title="Servicios de Desarrollo Web | Davod"
  description="Servicios profesionales de desarrollo web, apps móviles, UI/UX design y consultoría digital. Soluciones tecnológicas que impulsan tu negocio."
>
  <Header />
  
  <main class="pt-20"> 
    <div class="min-h-screenpy-8">
      <!-- Hero Section -->
      <section class="py-20 lg:py-32 relative overflow-hidden">
        <div class="absolute inset-0 bg-gradient-to-br from-dark-900 via-dark-950 to-transparent"></div>
        
        <div class="relative z-10 container mx-auto px-4 sm:px-6 lg:px-8 text-center">
          <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold mb-6">
            <span class="bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent">
              Háblanos sobre
            </span>
            <br>
            <span class="bg-gradient-to-r from-primary-400 to-primary-600 bg-clip-text text-transparent">
              tu proyecto web
            </span>
          </h1>
          <p class="text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed">
            Completa este formulario para que podamos entender mejor tus necesidades y ofrecerte la mejor solución para tu proyecto de desarrollo web.
          </p>
        </div>
      </section>

      <div class="pt-0 section-padding max-w-7xl mx-auto flex flex-col lg:flex lg:flex-row gap-8">

        <div class="w-3/3 w-full lg:w-1/3 space-y-6 sticky top-28 z-10 self-start">
          <!-- Progress Bar -->
          <div class="mb-8 pt-4 p-6 bg-white rounded-xl shadow-lg">
            <div class="flex justify-between text-sm text-gray-900 mb-2">
              <span>Progreso</span>
              <span id="progress-text">0%</span>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-2">
              <div id="progress-bar" class="bg-gradient-to-r from-blue-400 to-blue-600 h-2 rounded-full transition-all duration-500 ease-out w-0"></div>
            </div>
          </div>

          <!-- Budget Estimate -->
          <div id="budget-estimate" class="mb-8 p-6 bg-white rounded-xl shadow-lg border-l-4 border-green-500 opacity-0 transform translate-y-4 transition-all duration-500">
            <div class="flex items-center gap-3 mb-2">
              <div class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center">
                <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                </svg>
              </div>
              <h3 class="text-lg font-semibold text-gray-900">Estimación de presupuesto</h3>
            </div>
            <p class="text-3xl font-bold text-green-600" id="budget-amount">0€ - 0€</p>
            <p class="text-sm text-gray-600 mt-1">Esta es una estimación inicial basada en tus selecciones</p>
          </div>

        </div>

        <!-- Form -->
        <form id="web-form" class="space-y-8 w-3/3 lg:w-2/3">
          <!-- Section 1: General Information -->
          <div class="form-section bg-dark-900/50 backdrop-blur-sm border border-gray-800 rounded-2xl p-8 hover:shadow-xl transition-shadow duration-300">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H9m0 0H5m0 0h2M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                </svg>
              </div>
              <h2 class="text-2xl font-bold text-white">1. Información general</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  Nombre de la empresa / marca *
                </label>
                <input
                  type="text"
                  name="company_name"
                  required
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                  placeholder="Tu empresa o marca"
                />
                <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
              </div>

              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  Persona de contacto *
                </label>
                <input
                  type="text"
                  name="contact_person"
                  required
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                  placeholder="Tu nombre completo"
                />
                <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
              </div>

              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  Correo electrónico *
                </label>
                <input
                  type="email"
                  name="email"
                  required
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                  placeholder="tu@email.com"
                />
                <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
              </div>

              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  Teléfono
                </label>
                <input
                  type="tel"
                  name="phone"
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                  placeholder="666 123 456"
                />
              </div>

              <div class="input-group md:col-span-2">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  Sector de actividad *
                </label>
                <select
                  name="business_sector"
                  required
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                >
                  <option value="">Selecciona tu sector</option>
                  <option value="tecnologia">Tecnología</option>
                  <option value="salud">Salud y medicina</option>
                  <option value="educacion">Educación</option>
                  <option value="comercio">Comercio y retail</option>
                  <option value="servicios">Servicios profesionales</option>
                  <option value="hosteleria">Hostelería y turismo</option>
                  <option value="inmobiliario">Inmobiliario</option>
                  <option value="construccion">Construcción</option>
                  <option value="alimentacion">Alimentación</option>
                  <option value="moda">Moda y belleza</option>
                  <option value="arte">Arte y cultura</option>
                  <option value="otro">Otro</option>
                </select>
                <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
              </div>

              <div class="input-group md:col-span-2">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  Descripción breve de la empresa *
                  <!-- tooltip <div class="inline-block ml-2 relative group">
                    <svg class="w-4 h-4 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div class="tooltip absolute bottom-6 left-0 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10 whitespace-nowrap">
                      Describe qué hace tu empresa y a quién se dirige
                    </div>
                  </div> -->
                </label>
                <textarea
                  name="company_description"
                  required
                  rows="4"
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200 resize-vertical"
                  placeholder="Describe qué hace tu empresa y cuál es tu público objetivo..."
                ></textarea>
                <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
              </div>
            </div>
          </div>

          <!-- Section 2: Web Objectives -->
          <div class="form-section bg-dark-900/50 backdrop-blur-sm border border-gray-800 rounded-2xl p-8 hover:shadow-xl transition-shadow duration-300">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-green-500 rounded-full flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
              </div>
              <h2 class="text-2xl font-bold text-white">2. Objetivos de la web</h2>
            </div>

            <div class="space-y-6">
              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  ¿Cuál es el objetivo principal de la web? *
                </label>
                <select
                  name="main_objective"
                  required
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                  data-price-factor="objective"
                >
                  <option value="">Selecciona el objetivo principal</option>
                  <option value="captar_clientes" data-price="800">Captar clientes potenciales</option>
                  <option value="mostrar_catalogo" data-price="1200">Mostrar catálogo de productos/servicios</option>
                  <option value="vender_online" data-price="2500">Vender online (ecommerce)</option>
                  <option value="branding" data-price="1000">Branding y presencia digital</option>
                  <option value="blog" data-price="900">Blog y contenido</option>
                  <option value="portfolio" data-price="700">Portfolio profesional</option>
                  <option value="otro" data-price="1000">Otro</option>
                </select>
                <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
              </div>

              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  ¿Qué acciones clave quieres que realicen los usuarios? *
                </label>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="checkbox" name="user_actions[]" value="enviar_formulario" class="mr-3 text-green-500 focus:ring-green-500" data-price="100">
                    <span>Enviar formulario de contacto</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="checkbox" name="user_actions[]" value="llamar" class="mr-3 text-green-500 focus:ring-green-500" data-price="50">
                    <span>Realizar llamada telefónica</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="checkbox" name="user_actions[]" value="comprar" class="mr-3 text-green-500 focus:ring-green-500" data-price="500">
                    <span>Realizar compras online</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="checkbox" name="user_actions[]" value="suscribirse" class="mr-3 text-green-500 focus:ring-green-500" data-price="150">
                    <span>Suscribirse al newsletter</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="checkbox" name="user_actions[]" value="descargar" class="mr-3 text-green-500 focus:ring-green-500" data-price="100">
                    <span>Descargar recursos</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="checkbox" name="user_actions[]" value="reservar" class="mr-3 text-green-500 focus:ring-green-500" data-price="200">
                    <span>Hacer reservas</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Section 3: Structure and Pages -->
          <div class="form-section bg-dark-900/50 backdrop-blur-sm border border-gray-800 rounded-2xl p-8 hover:shadow-xl transition-shadow duration-300">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-purple-500 rounded-full flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                </svg>
              </div>
              <h2 class="text-2xl font-bold text-white">3. Estructura y páginas</h2>
            </div>

            <div class="space-y-4">
              <p class="block text-sm font-medium text-gray-300 mb-2">Selecciona las páginas que necesitas para tu web:</p>
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                  <input type="checkbox" name="pages[]" value="inicio" class="mr-3 text-purple-500 focus:ring-purple-500" checked data-price="0">
                  <span>Inicio</span>
                </label>
                <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                  <input type="checkbox" name="pages[]" value="sobre_nosotros" class="mr-3 text-purple-500 focus:ring-purple-500" data-price="150">
                  <span>Sobre nosotros</span>
                </label>
                <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                  <input type="checkbox" name="pages[]" value="servicios" class="mr-3 text-purple-500 focus:ring-purple-500" data-price="200">
                  <span>Servicios</span>
                </label>
                <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                  <input type="checkbox" name="pages[]" value="portfolio" class="mr-3 text-purple-500 focus:ring-purple-500" data-price="300">
                  <span>Portfolio</span>
                </label>
                <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                  <input type="checkbox" name="pages[]" value="tienda_online" class="mr-3 text-purple-500 focus:ring-purple-500" data-price="1500">
                  <span>Tienda online</span>
                </label>
                <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                  <input type="checkbox" name="pages[]" value="blog" class="mr-3 text-purple-500 focus:ring-purple-500" data-price="400">
                  <span>Blog</span>
                </label>
                <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                  <input type="checkbox" name="pages[]" value="contacto" class="mr-3 text-purple-500 focus:ring-purple-500" data-price="100">
                  <span>Contacto</span>
                </label>
              </div>

              <div class="input-group mt-4">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  Otras páginas específicas:
                </label>
                <input
                  type="text"
                  name="other_pages"
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                  placeholder="Especifica otras páginas que necesites..."
                />
              </div>
            </div>
          </div>

          <!-- Section 4: Design and Style -->
          <div class="form-section bg-dark-900/50 backdrop-blur-sm border border-gray-800 rounded-2xl p-8 hover:shadow-xl transition-shadow duration-300">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"></path>
                </svg>
              </div>
              <h2 class="text-2xl font-bold text-white">4. Diseño y estilo</h2>
            </div>

            <div class="space-y-6">
              <div class="input-group">
                
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  ¿Tienes colores corporativos definidos? *
                </label>
                <select
                  name=""
                  required
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                >
                  <option value="">Selecciona una opción</option>
                  <option value="tecnologia">Sí, tengo colores corporativos definidos</option>
                  <option value="tecnologia">No, necesito ayuda con la paleta de colores</option>
                </select>
                <div class="mt-3">
                  <input
                    type="text"
                    name="brand_colors"
                    class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                    placeholder="Especifica tus colores corporativos (ej: #FF6B35, #F7931E)"
                  />
                </div>
                <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
              </div>

              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  ¿Tienes logo y materiales gráficos?
                </label>
                <div class="space-y-3">
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="has_logo" value="yes" class="mr-3 text-orange-500 focus:ring-orange-500">
                    <span>Sí, tengo logo y materiales</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="has_logo" value="partial" class="mr-3 text-orange-500 focus:ring-orange-500">
                    <span>Tengo algunos elementos</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="has_logo" value="no" class="mr-3 text-orange-500 focus:ring-orange-500">
                    <span>No, necesito diseño completo</span>
                  </label>
                </div>
              </div>

              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  ¿Qué estilo de diseño prefieres? *
                </label>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                  <label class="flex items-center p-4 border-2 rounded-lg hover:border-orange-300 cursor-pointer transition-all duration-200">
                    <input type="radio" name="design_style" value="minimalista" required class="mr-3 text-orange-500 focus:ring-orange-500" data-price="0">
                    <div>
                      <div class="font-medium">Minimalista</div>
                      <div class="text-sm text-gray-500">Limpio, simple y elegante</div>
                    </div>
                  </label>
                  <label class="flex items-center p-4 border-2 rounded-lg hover:border-orange-300 cursor-pointer transition-all duration-200">
                    <input type="radio" name="design_style" value="moderno_visual" required class="mr-3 text-orange-500 focus:ring-orange-500" data-price="200">
                    <div>
                      <div class="font-medium">Moderno y Visual</div>
                      <div class="text-sm text-gray-500">Con imágenes y elementos visuales</div>
                    </div>
                  </label>
                  <label class="flex items-center p-4 border-2 rounded-lg hover:border-orange-300 cursor-pointer transition-all duration-200">
                    <input type="radio" name="design_style" value="elegante_premium" required class="mr-3 text-orange-500 focus:ring-orange-500" data-price="300">
                    <div>
                      <div class="font-medium">Elegante / Premium</div>
                      <div class="text-sm text-gray-500">Sofisticado y exclusivo</div>
                    </div>
                  </label>
                  <label class="flex items-center p-4 border-2 rounded-lg hover:border-orange-300 cursor-pointer transition-all duration-200">
                    <input type="radio" name="design_style" value="colorido_creativo" required class="mr-3 text-orange-500 focus:ring-orange-500" data-price="250">
                    <div>
                      <div class="font-medium">Colorido / Creativo</div>
                      <div class="text-sm text-gray-500">Vibrante y original</div>
                    </div>
                  </label>
                </div>
              </div>

              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  ¿Qué tipo de tipografía prefieres?
                </label>
                <select
                  name="typography_preference"
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                >
                  <option value="">Selecciona un estilo tipográfico</option>
                  <option value="moderna_sans">Moderna (Sans Serif)</option>
                  <option value="elegante_serif">Elegante (Serif)</option>
                  <option value="legible_simple">Simple y legible</option>
                  <option value="creativa_display">Creativa (Display)</option>
                  <option value="profesional">Profesional</option>
                </select>
              </div>

              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  ¿Quieres animaciones y transiciones?
                </label>
                <div class="space-y-3">
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="animations" value="yes" class="mr-3 text-orange-500 focus:ring-orange-500" data-price="300">
                    <span>Sí, me gustan las animaciones suaves</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="animations" value="minimal" class="mr-3 text-orange-500 focus:ring-orange-500" data-price="100">
                    <span>Solo animaciones mínimas</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="animations" value="no" class="mr-3 text-orange-500 focus:ring-orange-500" data-price="0">
                    <span>Prefiero algo estático y rápido</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Section 5: References and Inspiration -->
          <div class="form-section bg-dark-900/50 backdrop-blur-sm border border-gray-800 rounded-2xl p-8 hover:shadow-xl transition-shadow duration-300">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-pink-500 rounded-full flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
                </svg>
              </div>
              <h2 class="text-2xl font-bold text-white">5. Referencias e inspiración</h2>
            </div>

            <div class="space-y-6">
              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  Webs de referencia que te gustan
                  <div class="inline-block ml-2 relative group">
                    <svg class="w-4 h-4 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div class="tooltip absolute bottom-6 left-0 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10 whitespace-nowrap">
                      Incluye de 3 a 5 URLs de ejemplo
                    </div>
                  </div>
                </label>
                <textarea
                  name="reference_websites"
                  rows="4"
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                  placeholder="Escribe las URLs de 3-5 webs que te gusten, una por línea..."
                ></textarea>
              </div>

              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  ¿Qué te gusta de estas webs?
                </label>
                <textarea
                  name="what_you_like"
                  rows="3"
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                  placeholder="Describe qué elementos te llaman la atención: colores, estructura, fotos, estilo..."
                ></textarea>
              </div>

              <!-- <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  Adjuntar referencias visuales
                </label>
                <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-pink-400 transition-colors duration-200">
                  <input type="file" id="reference-files" name="reference_files" multiple accept=".jpg,.jpeg,.png,.pdf" class="hidden">
                  <label for="reference-files" class="cursor-pointer">
                    <svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                    </svg>
                    <p class="text-gray-600">Arrastra archivos aquí o <span class="text-pink-500">haz clic para seleccionar</span></p>
                    <p class="text-sm text-gray-400 mt-2">JPG, PNG, PDF hasta 10MB cada uno</p>
                  </label>
                </div>
              </div> -->
            </div>
          </div>

          <!-- Section 6: Content -->
          <div class="form-section bg-dark-900/50 backdrop-blur-sm border border-gray-800 rounded-2xl p-8 hover:shadow-xl transition-shadow duration-300">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-indigo-500 rounded-full flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                </svg>
              </div>
              <h2 class="text-2xl font-bold text-white">6. Contenido</h2>
            </div>

            <div class="space-y-6">
              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  ¿Dispones de los textos para la web?
                </label>
                <div class="space-y-3">
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="has_texts" value="yes" class="mr-3 text-indigo-500 focus:ring-indigo-500">
                    <span>Sí, tengo todos los textos listos</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="has_texts" value="partial" class="mr-3 text-indigo-500 focus:ring-indigo-500">
                    <span>Tengo algunos textos</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="has_texts" value="no" class="mr-3 text-indigo-500 focus:ring-indigo-500" data-price="400">
                    <span>No, necesito ayuda con la redacción</span>
                  </label>
                </div>
              </div>

              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  ¿Dispones de imágenes/fotografías propias?
                </label>
                <div class="space-y-3">
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="has_images" value="yes" class="mr-3 text-indigo-500 focus:ring-indigo-500">
                    <span>Sí, tengo imágenes profesionales</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="has_images" value="partial" class="mr-3 text-indigo-500 focus:ring-indigo-500">
                    <span>Tengo algunas imágenes</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="has_images" value="no" class="mr-3 text-indigo-500 focus:ring-indigo-500" data-price="300">
                    <span>No, necesito imágenes de stock</span>
                  </label>
                </div>
              </div>
              
            </div>
          </div>

          <!-- Section 7: Additional Features -->
          <div class="form-section bg-dark-900/50 backdrop-blur-sm border border-gray-800 rounded-2xl p-8 hover:shadow-xl transition-shadow duration-300">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-teal-500 rounded-full flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                </svg>
              </div>
              <h2 class="text-2xl font-bold text-white">7. Funcionalidades adicionales</h2>
            </div>

            <div class="space-y-4">
              <p class="text-gray-600 mb-4">Selecciona las funcionalidades que necesitas:</p>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                  <input type="checkbox" name="features[]" value="contact_form" class="mr-3 text-teal-500 focus:ring-teal-500" data-price="150">
                  <span>Formulario de contacto</span>
                </label>
                <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                  <input type="checkbox" name="features[]" value="live_chat" class="mr-3 text-teal-500 focus:ring-teal-500" data-price="300">
                  <span>Chat en vivo</span>
                </label>
                <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                  <input type="checkbox" name="features[]" value="seo" class="mr-3 text-teal-500 focus:ring-teal-500" data-price="400">
                  <span>SEO básico</span>
                </label>
                <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                  <input type="checkbox" name="features[]" value="social_integration" class="mr-3 text-teal-500 focus:ring-teal-500" data-price="150">
                  <span>Integración redes sociales</span>
                </label>
                <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                  <input type="checkbox" name="features[]" value="multilanguage" class="mr-3 text-teal-500 focus:ring-teal-500" data-price="800">
                  <span>Multidioma</span>
                </label>
                <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                  <input type="checkbox" name="features[]" value="ecommerce" class="mr-3 text-teal-500 focus:ring-teal-500" data-price="1500">
                  <span>Ecommerce completo</span>
                </label>
              </div>

              <div class="input-group mt-6">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  Otras funcionalidades específicas:
                </label>
                <textarea
                  name="other_features"
                  rows="3"
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                  placeholder="Describe cualquier otra funcionalidad específica que necesites..."
                ></textarea>
              </div>
            </div>
          </div>

          <!-- Section 8: Technical Aspects -->
          <div class="form-section bg-dark-900/50 backdrop-blur-sm border border-gray-800 rounded-2xl p-8 hover:shadow-xl transition-shadow duration-300">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-cyan-500 rounded-full flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01"></path>
                </svg>
              </div>
              <h2 class="text-2xl font-bold text-white">8. Aspectos técnicos</h2>
            </div>

            <div class="space-y-6">
              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  ¿Tienes ya dominio y hosting?
                </label>
                <div class="space-y-3">
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="has_hosting" value="yes" class="mr-3 text-cyan-500 focus:ring-cyan-500">
                    <span>Sí, tengo dominio y hosting</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="has_hosting" value="domain_only" class="mr-3 text-cyan-500 focus:ring-cyan-500">
                    <span>Solo tengo el dominio</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="has_hosting" value="no" class="mr-3 text-cyan-500 focus:ring-cyan-500" data-price="200">
                    <span>No tengo nada, necesito ayuda</span>
                  </label>
                </div>
              </div>

              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  ¿Necesitas ayuda con la configuración inicial?
                </label>
                <div class="space-y-3">
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="checkbox" name="technical_help[]" value="dns_configuration" class="mr-3 text-cyan-500 focus:ring-cyan-500" data-price="100">
                    <span>Configuración DNS</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="checkbox" name="technical_help[]" value="hosting_setup" class="mr-3 text-cyan-500 focus:ring-cyan-500" data-price="150">
                    <span>Configuración de hosting</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="checkbox" name="technical_help[]" value="email_setup" class="mr-3 text-cyan-500 focus:ring-cyan-500" data-price="100">
                    <span>Configuración de emails corporativos</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="checkbox" name="technical_help[]" value="ssl_certificate" class="mr-3 text-cyan-500 focus:ring-cyan-500" data-price="50">
                    <span>Certificado SSL</span>
                  </label>
                </div>
              </div>

              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  ¿Quieres que la web sea autogestionable?
                  <div class="inline-block ml-2 relative group">
                    <svg class="w-4 h-4 text-gray-400 cursor-help" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <div class="tooltip absolute bottom-6 left-0 bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10 whitespace-nowrap">
                      CMS para editar contenido sin conocimientos técnicos
                    </div>
                  </div>
                </label>
                <div class="space-y-3">
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="needs_cms" value="yes" class="mr-3 text-cyan-500 focus:ring-cyan-500" data-price="500">
                    <span>Sí, quiero poder editar contenidos fácilmente</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="needs_cms" value="basic" class="mr-3 text-cyan-500 focus:ring-cyan-500" data-price="200">
                    <span>Solo funciones básicas de edición</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="needs_cms" value="no" class="mr-3 text-cyan-500 focus:ring-cyan-500">
                    <span>No, prefiero web estática</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Section 9: Timeline and Budget -->
          <div class="form-section bg-dark-900/50 backdrop-blur-sm border border-gray-800 rounded-2xl p-8 hover:shadow-xl transition-shadow duration-300">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                </svg>
              </div>
              <h2 class="text-2xl font-bold text-white">9. Plazos y presupuesto</h2>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  Fecha aproximada de lanzamiento *
                </label>
                <input
                  type="date"
                  name="launch_date"
                  required
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                />
                <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
              </div>

              <div class="input-group">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  Presupuesto estimado (rango) *
                </label>
                <select
                  name="budget_range"
                  required
                  class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                >
                  <option value="">Selecciona tu rango de presupuesto</option>
                  <option value="1000-5000">500€ - 2.000€</option>
                  <option value="5000-15000">2.000€ - 5.000€</option>
                  <option value="15000-50000">5.000€ - 10.000€</option>
                  <option value="50000+">+10.000€</option>
                  <option value="flexible">Flexible según propuesta</option>
                </select>
                <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
              </div>

              <div class="input-group md:col-span-2">
                <label class="block text-sm font-medium text-gray-300 mb-2">
                  ¿Hay alguna urgencia especial?
                </label>
                <div class="space-y-3">
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="urgency" value="normal" class="mr-3 text-yellow-500 focus:ring-yellow-500">
                    <span>Tiempo normal de desarrollo</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="urgency" value="urgent" class="mr-3 text-yellow-500 focus:ring-yellow-500">
                    <span>Necesito entregas rápidas (puede afectar al presupuesto)</span>
                  </label>
                  <label class="flex items-center p-3 bg-dark-800 border border-gray-700 rounded-xl cursor-pointer transition-colors duration-200 hover:bg-dark-700">
                    <input type="radio" name="urgency" value="flexible" class="mr-3 text-yellow-500 focus:ring-yellow-500">
                    <span>Tengo flexibilidad con los plazos</span>
                  </label>
                </div>
              </div>
            </div>
          </div>

          <!-- Section 10: Additional Comments -->
          <div class="form-section bg-dark-900/50 backdrop-blur-sm border border-gray-800 rounded-2xl p-8 hover:shadow-xl transition-shadow duration-300">
            <div class="flex items-center gap-3 mb-6">
              <div class="w-10 h-10 bg-red-500 rounded-full flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
                </svg>
              </div>
              <h2 class="text-2xl font-bold text-white">10. Observaciones finales</h2>
            </div>

            <div class="input-group">
              <label class="block text-sm font-medium text-gray-300 mb-2">
                Detalles adicionales, ideas o requisitos especiales *
              </label>
              <textarea
                name="additional_comments"
                rows="6"
                required
                class="w-full px-4 py-3 bg-dark-800 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-600 focus:border-transparent transition-all duration-200"
                placeholder="Escribe aquí cualquier detalle adicional, idea específica, requisito especial, o cualquier cosa que consideres importante para el proyecto..."
              ></textarea>
            </div>
            <div class="error-message text-red-500 text-sm mt-1 hidden"></div>
          </div>

          <!-- Submit Button -->
          <div class="w-full flex justify-center text-center pb-10" style="animation-delay: 0.4s;">
            <button
              type="submit"
              id="submit-btn"
              class=""
            >
              <span class="flex gap-3 hover:scale-105 hover:shadow-xl hover:shadow-primary-600/25 btn-primary text-lg px-8 py-4 group justify-center items-center text-dark-950 disabled:opacity-50 disabled:cursor-not-allowed">
                <span id="submit-text">Enviar solicitud</span>
                <svg id="submit-icon" xmlns="http://www.w3.org/2000/svg" width="18" viewBox="0 0 20 20" fill="none">
                  <path d="M16.6719 0.386615C17.0783 0.240566 17.5173 0.210609 17.9395 0.302631C18.3699 0.396531 18.7647 0.612217 19.0762 0.923725C19.3877 1.23523 19.6034 1.63003 19.6973 2.06044C19.7893 2.48235 19.7591 2.92094 19.6133 3.32705L19.6143 3.32802L14.6582 18.1786L14.6592 18.1796C14.5356 18.5542 14.3177 18.891 14.0264 19.1571C13.7372 19.4213 13.385 19.6061 13.004 19.6962C12.62 19.7905 12.2181 19.7843 11.8379 19.6757C11.4609 19.5679 11.1179 19.3642 10.8428 19.0849L8.21293 16.4667L5.46 17.8905C5.22448 18.0123 4.94155 18.001 4.71684 17.8602C4.49211 17.7194 4.35842 17.4701 4.36528 17.205L4.48149 12.7235L0.916059 9.1581L0.917036 9.15712C0.650846 8.89109 0.453889 8.56349 0.345747 8.20302C0.239336 7.84804 0.222067 7.47264 0.293989 7.10927C0.367146 6.70632 0.546399 6.32987 0.81352 6.01943C1.08069 5.70906 1.42597 5.47504 1.81352 5.34267L1.8184 5.34169L16.6719 0.385639V0.386615ZM5.98051 12.7792L5.8975 15.9745L8.00981 14.8827C8.29931 14.7331 8.65286 14.7876 8.88383 15.0175L11.9014 18.0214L11.9092 18.0292C12.0032 18.1255 12.1207 18.1963 12.25 18.2333C12.3793 18.2702 12.516 18.2722 12.6465 18.2401L12.6563 18.2382C12.7899 18.2071 12.9134 18.1422 13.0147 18.0497C13.1161 17.9571 13.1914 17.8393 13.2344 17.7089L13.2354 17.7069L18.1915 2.85341L18.2002 2.829C18.2331 2.74046 18.2477 2.64715 18.2481 2.55361L5.98051 12.7792ZM2.29301 6.76454C2.16026 6.8109 2.04201 6.89132 1.95024 6.99794C1.85736 7.10588 1.79507 7.23676 1.76957 7.37685C1.76853 7.38261 1.76685 7.3887 1.76567 7.39443C1.73987 7.51975 1.74554 7.6498 1.78227 7.77236C1.80984 7.86424 1.85452 7.95004 1.91313 8.02529L1.97661 8.09755L5.2852 11.4061L16.5674 2.00087L2.29301 6.76454Z" fill="currentColor"/>
                </svg>
                <svg id="loading-icon" class="w-5 h-5 animate-spin hidden" fill="none" viewBox="0 0 24 24">
                  <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                  <path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
              </span>
            </button>
          </div>
        </form>

        <!-- Success Message -->
        <div id="success-message" class="fixed inset-0 bg-black bg-opacity-50 items-center justify-center z-50 hidden">
          <div class="bg-white rounded-xl p-8 max-w-md mx-4 text-center transform scale-95 transition-transform duration-300">
            <div class="w-16 h-16 bg-green-500 rounded-full flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
              </svg>
            </div>
            <h3 class="text-2xl font-bold text-gray-900 mb-2">¡Solicitud Enviada!</h3>
            <p class="text-gray-600 mb-6">
              Hemos recibido tu información correctamente. Te contactaremos pronto con una propuesta personalizada para tu proyecto.
            </p>
            <button
              onclick="closeSuccessMessage()"
              class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-6 rounded-lg transition-colors duration-200"
            >
              Cerrar
            </button>
          </div>
        </div>
      </div>
    </div>
  </main>
  
  <Footer />
</Layout>

<script>
// Form Management and Validation
class WebFormManager {
  form: HTMLFormElement | null;
  progressBar: HTMLElement | null;
  progressText: HTMLElement | null;
  budgetEstimate: HTMLElement | null;
  budgetAmount: HTMLElement | null;
  submitBtn: HTMLButtonElement | null;

  constructor() {
    this.form = document.getElementById('web-form') as HTMLFormElement | null;
    this.progressBar = document.getElementById('progress-bar');
    this.progressText = document.getElementById('progress-text');
    this.budgetEstimate = document.getElementById('budget-estimate');
    this.budgetAmount = document.getElementById('budget-amount');
    this.submitBtn = document.getElementById('submit-btn') as HTMLButtonElement | null;
    this.init();
  }

  init() {
    this.bindEvents();
    this.calculateProgress();
    this.calculateBudget();
    this.observeSections();
  }

  bindEvents() {
    if (!this.form) return;
    this.form.addEventListener('input', () => {
      this.calculateProgress();
      this.calculateBudget();
      this.validateForm();
    });
    this.form.addEventListener('submit', (e: Event) => this.handleSubmit(e));
    const fileInput = document.getElementById('reference-files') as HTMLInputElement | null;
    if (fileInput) {
      fileInput.addEventListener('change', (e: Event) => this.handleFileUpload(e));
    }
  }

  calculateProgress() {
    const sections = document.querySelectorAll('.form-section');
    let completedSections = 0;
    sections.forEach(section => {
      const inputs = section.querySelectorAll('input[required], select[required], textarea[required]');
      let sectionComplete = true;
      inputs.forEach((input: Element) => {
        if ('value' in input && !(input as HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement).value.trim()) {
          sectionComplete = false;
        }
      });
      if (sectionComplete) {
        completedSections++;
        section.classList.add('completed');
      } else {
        section.classList.remove('completed');
      }
    });
    const progress = (completedSections / sections.length) * 100;
    if (this.progressBar) this.progressBar.style.width = `${progress}%`;
    if (this.progressText) this.progressText.textContent = `${Math.round(progress)}%`;
    if (progress > 20 && this.budgetEstimate) {
      this.budgetEstimate.style.opacity = '1';
      this.budgetEstimate.style.transform = 'translateY(0)';
    }
  }

  calculateBudget() {
    let basePrice = 800;
    let totalPrice = basePrice;
    if (!this.form) return;
    const priceElements = this.form.querySelectorAll('[data-price]');
    priceElements.forEach((element: Element) => {
      if ('type' in element) {
        if ((element as HTMLInputElement).type === 'checkbox' || (element as HTMLInputElement).type === 'radio') {
          const input = element as HTMLInputElement;
          if (input.checked) {
            totalPrice += parseInt(input.dataset?.price || '0');
          }
        } else if ((element as HTMLSelectElement).type === 'select-one' && (element as HTMLSelectElement).selectedIndex > 0) {
          const select = element as HTMLSelectElement;
          const selectedOption = select.options[select.selectedIndex];
          totalPrice += parseInt(selectedOption.dataset?.price || '0');
        }
      }
    });
    const minPrice = Math.round(totalPrice * 0.8);
    const maxPrice = Math.round(totalPrice * 1.2);
    if (this.budgetAmount) this.budgetAmount.textContent = `${minPrice.toLocaleString()}€ - ${maxPrice.toLocaleString()}€`;
  }

  validateForm() {
    if (!this.form) return false;
    const inputs = this.form.querySelectorAll('input[required], select[required], textarea[required]');
    let isValid = true;
    inputs.forEach((input: Element) => {
      const errorElement = input.parentNode ? (input.parentNode as HTMLElement).querySelector('.error-message') : null;
      let inputEl: HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement | null = null;
      if ('type' in input) {
        if ((input as HTMLInputElement).type === 'checkbox' || (input as HTMLInputElement).type === 'radio' || (input as HTMLInputElement).type === 'email' || (input as HTMLInputElement).type === 'text' || (input as HTMLInputElement).type === 'date' || (input as HTMLInputElement).type === 'tel') {
          inputEl = input as HTMLInputElement;
        }
      } else if ('rows' in input) {
        inputEl = input as HTMLTextAreaElement;
      } else if ('selectedIndex' in input) {
        inputEl = input as HTMLSelectElement;
      }
      if (inputEl && !inputEl.value.trim()) {
        isValid = false;
        inputEl.classList.add('border-red-500');
        if (errorElement) {
          errorElement.textContent = 'Este campo es obligatorio';
          errorElement.classList.remove('hidden');
        }
      } else if (inputEl) {
        inputEl.classList.remove('border-red-500');
        if (errorElement) {
          errorElement.classList.add('hidden');
        }
      }
      if (inputEl && 'type' in inputEl && inputEl.type === 'email' && inputEl.value) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(inputEl.value)) {
          isValid = false;
          inputEl.classList.add('border-red-500');
          if (errorElement) {
            errorElement.textContent = 'Por favor, introduce un email válido';
            errorElement.classList.remove('hidden');
          }
        }
      }
    });
    return isValid;
  }

  async handleSubmit(e: Event) {
    e.preventDefault();
    if (!this.validateForm()) {
      this.showError('Por favor, completa todos los campos obligatorios correctamente.');
      return;
    }
    if (this.submitBtn) this.submitBtn.disabled = true;
    const submitText = document.getElementById('submit-text');
    const submitIcon = document.getElementById('submit-icon');
    const loadingIcon = document.getElementById('loading-icon');
    if (submitText) submitText.textContent = 'Enviando...';
    if (submitIcon) submitIcon.classList.add('hidden');
    if (loadingIcon) loadingIcon.classList.remove('hidden');
    try {
      if (!this.form) throw new Error('Formulario no encontrado');
      const formData = new FormData(this.form);
      formData.append('estimated_budget', this.budgetAmount ? this.budgetAmount.textContent || '' : '');
      const response = await fetch('https://api.web3forms.com/submit', {
        method: 'POST',
        body: formData
      });
      if (response.ok) {
        this.showSuccessMessage();
        this.form.reset();
      } else {
        throw new Error('Error en el envío');
      }
    } catch (error) {
      this.showError('Ha ocurrido un error al enviar el formulario. Por favor, inténtalo de nuevo.');
      console.error('Form submission error:', error);
    } finally {
      if (this.submitBtn) this.submitBtn.disabled = false;
      const submitText = document.getElementById('submit-text');
      const submitIcon = document.getElementById('submit-icon');
      const loadingIcon = document.getElementById('loading-icon');
      if (submitText) submitText.textContent = 'Enviar Solicitud';
      if (submitIcon) submitIcon.classList.remove('hidden');
      if (loadingIcon) loadingIcon.classList.add('hidden');
    }
  }

  showSuccessMessage() {
    const successMessage = document.getElementById('success-message');
    if (!successMessage) return;
    successMessage.classList.remove('hidden');
    const transformDiv = successMessage.querySelector('.transform');
    if (transformDiv) {
      transformDiv.classList.add('scale-100');
      transformDiv.classList.remove('scale-95');
    }
  }

  showError(message: string) {
    const notification = document.createElement('div');
    notification.className = 'fixed top-4 right-4 bg-red-500 text-white px-6 py-3 rounded-lg shadow-lg z-50 transform translate-x-full transition-transform duration-300';
    notification.textContent = message;
    document.body.appendChild(notification);
    setTimeout(() => {
      notification.classList.remove('translate-x-full');
    }, 100);
    setTimeout(() => {
      notification.classList.add('translate-x-full');
      setTimeout(() => notification.remove(), 300);
    }, 5000);
  }

  handleFileUpload(e: Event) {
    const input = e.target as HTMLInputElement;
    if (!input || !input.files) return;
    const files = Array.from(input.files);
    const maxSize = 10 * 1024 * 1024;
    files.forEach((file: File) => {
      if (file.size > maxSize) {
        this.showError(`El archivo ${file.name} es demasiado grande. Máximo 10MB.`);
        input.value = '';
        return;
      }
    });
  }

  observeSections() {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('animate-fade-in');
        }
      });
    }, { threshold: 0.1 });
    document.querySelectorAll('.form-section').forEach(section => {
      observer.observe(section);
    });
  }
}

// Close success message
function closeSuccessMessage() {
  const successMessage = document.getElementById('success-message');
  if (successMessage) successMessage.classList.add('hidden');
}

// Initialize form and add Web3Forms access key when DOM is loaded
document.addEventListener('DOMContentLoaded', () => {
  new WebFormManager();
  // Add hidden input for Web3Forms access key
  const form = document.getElementById('web-form');
  if (form && !form.querySelector('input[name="access_key"]')) {
    const accessKeyInput = document.createElement('input');
    accessKeyInput.type = 'hidden';
    accessKeyInput.name = 'access_key';
    accessKeyInput.value = 'YOUR_WEB3FORMS_ACCESS_KEY_HERE'; // Replace with your actual access key
    form.appendChild(accessKeyInput);
  }
});
</script>

<style>
  .nav-link {
    @apply text-white hover:text-primary-500 flex items-center gap-2 px-1 py-2 text-lg font-medium transition-colors relative;
  }
  
  .nav-link::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    width: 0;
    height: 2px;
    background: theme('colors.primary.500');
    transition: all 0.3s ease;
    transform: translateX(-50%);
  }

  .nav-link:hover::after {
    width: 100%;
  }
/* Custom animations */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in {
  animation: fadeIn 0.6s ease-out forwards;
}

/* Form section completed state */
.form-section.completed {
  border-left: 4px solid #10B981;
}

/* Custom checkbox and radio styles */
input[type="checkbox"]:checked,
input[type="radio"]:checked {
  background-size: 100% 100%;
  background-position: center;
  background-repeat: no-repeat;
}

/* Tooltip styles */
.tooltip {
  min-width: 200px;
  max-width: 300px;
  white-space: normal;
  word-wrap: break-word;
}

/* File upload area hover effect */
.border-dashed:hover {
  background-color: rgba(59, 130, 246, 0.02);
}

/* Success message animation */
#success-message.hidden .transform {
  transform: scale(0.95);
}

#success-message:not(.hidden) .transform {
  transform: scale(1);
}

/* Input focus animations */
.input-group input:focus,
.input-group select:focus,
.input-group textarea:focus {
  box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  border-color: #3B82F6;
}

/* Mostrar borde rojo en selects con error */
select.border-red-500 {
  border-color: #ef4444 !important;
}
input.border-red-500 {
  border-color: #ef4444 !important;
}

/* Progress bar gradient */
#progress-bar {
  box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
}

/* Button hover effects */
button:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
}

/* Custom scrollbar for textareas */
textarea::-webkit-scrollbar {
  width: 6px;
}

textarea::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 3px;
}

textarea::-webkit-scrollbar-thumb {
  background: #cbd5e0;
  border-radius: 3px;
}

textarea::-webkit-scrollbar-thumb:hover {
  background: #a0aec0;
}

/* Responsive design improvements */
@media (max-width: 768px) {
  .tooltip {
    display: none;
  }
  
  .form-section {
    padding: 1.5rem;
  }
  
  .grid {
    gap: 1rem;
  }
}
</style>